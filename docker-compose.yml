version: "2.2"

services:
  proxy:
    image: dobbs/proxy:latest
    init: true
    volumes:
      - "./Caddyfile:/etc/proxy/Caddyfile"
    ports:
      - "80:80"
      - "443:443"
  farm:
    image: dobbs/farm:0.12.0
    init: true
    volumes:
      - dot-wiki:/home/app/.wiki
    ports:
      - "3000:3000"
    environment:
      DOMAIN: localtest.me
      COOKIE: secure
  images:
    image: dobbs/image-transporter
    init: true
    ports:
      - "4010:4010"

volumes:
  dot-wiki:
    external:
      name: wiki.localtest.me
